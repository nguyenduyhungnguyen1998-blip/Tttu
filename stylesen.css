:root{ --bg:#f5f7fb; --card:#ffffff; --accent:#2b8cff; --muted:#6b7b90; --accent2:#6fd3ff; --border-color: #e6f0ff; }
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;background:var(--bg);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;color:#101828}
.app{width:100%;max-width:1400px;background:var(--card);border-radius:16px;padding:20px;box-shadow:0 20px 50px rgba(15,30,60,0.08);}
.app-header{padding-bottom:16px;border-bottom:1px solid var(--border-color);margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;}
.app-header h1{margin:0;font-size:20px}
.kv{font-size:13px;color:var(--muted);font-weight:500;}

/* --- BỐ CỤC DASHBOARD --- */
.dashboard-layout { display: grid; grid-template-columns: 280px 1fr 320px; gap: 24px; align-items: flex-start; }
.control-panel, .info-hub { display: flex; flex-direction: column; gap: 16px; }
.center-stage { display: flex; flex-direction: column; min-width: 0; }

/* --- CỘT 1: CONTROL PANEL --- */
.control-group { background: #fbfdff; border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; }
.control-group h4 { margin: 0 0 12px 0; font-size: 16px; }
.control-group label, .control-group button, .control-group .upload-btn { display: block; width: 100%; }
.control-group label { margin-bottom: 10px; font-weight: 600; font-size: 14px; }
.control-group label:last-child { margin-bottom: 0; }
.control-group button, .control-group .upload-btn { margin-bottom: 8px; text-align: center; }
.theme-select, .speed-select, input[type=number] { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid var(--border-color); background: #fff; margin-top: 4px; }
.upload-btn { padding: 8px 12px; cursor: pointer; }
.sound-toggle { display: flex; justify-content: space-between; align-items: center; }

/* --- CỘT 2: CENTER STAGE --- */
.game-stats { display: flex; justify-content: center; gap: 10px; margin-bottom: 16px; flex-wrap: wrap; }
.badge{background:#f7fbff;padding:8px 14px;border-radius:12px;font-weight:700;border:1px solid var(--border-color)}
.wrap-stage{display:flex;gap:16px;justify-content:space-around;padding:12px;position:relative;flex-grow: 1;}
.pole{flex: 1; max-width: 240px; height:380px;background:linear-gradient(180deg,#eef7ff,#e6f2ff);border-radius:12px;padding-bottom:8px;display:flex;flex-direction:column-reverse;align-items:center;position:relative;border:2px solid rgba(10,30,80,0.08);transition:all .18s;box-shadow:0 12px 30px rgba(10,30,80,0.04)}
.pole .peg{position:absolute;left:50%;transform:translateX(-50%);bottom:8px;width:12px;height:280px;background:linear-gradient(180deg,#cfe6ff,#bcdfff);border-radius:8px;}
.pole .pole-label { position:absolute; bottom:-24px; font-weight: 700; color: var(--muted); }
.pole.hv{transform:translateY(-6px);box-shadow:0 28px 60px rgba(43,140,255,0.12);border-color:rgba(43,140,255,0.16)}
.disk{height:26px;margin:2px 0;border-radius:8px;color:white;font-weight:800;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;box-shadow:0 4px 10px rgba(12,30,80,0.08);transition:all .12s;padding:0 8px;position:relative;}
.disk.small{height:22px;border-radius:6px}
.disk.held{ transform: translateY(-38px); box-shadow: 0 20px 35px rgba(43, 140, 255, 0.25); z-index: 1000 !important; }
.game-footer { display: flex; gap: 12px; align-items: center; margin-top: 24px; }
.progress{height:8px;background:#eef6ff;border-radius:999px;overflow:hidden;flex-grow: 1;}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0%}
.footerNote{margin-top:12px;color:var(--muted);font-size:12px;text-align:center;}

/* --- CỘT 3: INFO HUB --- */
.info-card { background: #fbfdff; border: 1px solid var(--border-color); border-radius: 12px; padding: 18px; }
.info-card h3 { margin: 0 0 10px 0; font-size: 16px; }
.info-card p { margin: 4px 0; font-size: 14px; color: var(--muted); line-height: 1.5; }
.info-card .fact { margin-top: 12px; padding-top: 12px; border-top: 1px solid #e6f0ff; }
.info-card strong { color: var(--accent); font-weight: 700; }
#learnPanel { padding: 16px; }
.learn-header { display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.stack-area { max-height: 220px; overflow-y: auto; padding-right: 8px; margin-bottom: 8px; }
.stack-node{padding:8px;border-radius:8px;margin-bottom:6px;background:#f0f6ff;border:1px solid rgba(43,140,255,0.1);font-weight:600; font-size: 13px;}
.learn-explain { font-size:13px;color:var(--muted);margin-top:8px; font-weight: 500; min-height: 2.5em; }
.learn-controls { display:flex;gap:8px;margin-top:12px;justify-content:center}
.learn-speed-label { display: flex; justify-content: center; margin-top: 10px; align-items: center; gap: 5px; }

/* --- Các nút & popup (styles chung) --- */
.btn{padding:9px 14px;border-radius:10px;border:0;background:var(--accent);color:white;cursor:pointer;font-weight:600;transition:all .12s}
.btn:hover{filter:brightness(1.1);}
.ghost{background:transparent;border:1px solid var(--border-color);color:var(--accent);font-weight:600;padding:9px 14px;border-radius:10px;cursor:pointer;transition:all .12s}
.ghost:hover{background:rgba(43,140,255,0.05); border-color: rgba(43,140,255,0.2);}
.btn:disabled, .ghost:disabled { opacity: 0.5; cursor: not-allowed; transform: none; filter: grayscale(50%); background-color: #f0f0f0; border-color: var(--border-color); }
.fullscreen-overlay{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center;z-index:100000}
.fullscreen-overlay .box{background:var(--card);padding:22px;border-radius:12px;max-width:960px;width:94%;box-shadow:0 30px 80px rgba(2,6,23,0.35);text-align:center}

/* --- RESPONSIVE DESIGN --- */
@media (max-width: 1200px) { .dashboard-layout { grid-template-columns: 240px 1fr; } .info-hub { display: none; } }
@media (max-width: 768px) { body { padding: 0; } .app { border-radius: 0; min-height: 100vh; padding: 15px; } .dashboard-layout { grid-template-columns: 1fr; } .center-stage { order: 1; } .control-panel { order: 2; } .pole { height: 300px; } .pole .peg { height: 220px; } .disk { height: 24px; } .disk.small { height: 20px; } .game-stats { margin-bottom: 10px; } }
